<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>Shared Persistent Heap Data Environment Manual: src/sphgtod.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Shared Persistent Heap Data Environment Manual
   &#160;<span id="projectnumber">1.1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">sphgtod.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Functions to convert time stamp (sphtimer_t) values to struct timeval value format with gettimeofday() epoch.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;sys/time.h&gt;</code><br />
<code>#include &lt;<a class="el" href="sphtimer_8h_source.html">sphtimer.h</a>&gt;</code><br />
</div>
<p><a href="sphgtod_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a860edd3eb0e9d2d4c3adbaafca6b86ef"><td class="memItemLeft" align="right" valign="top"><a class="el" href="sphtimer_8h.html#a4d08a6f74d96b695afefd03854839b83">__C__</a> int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sphgtod_8h.html#a860edd3eb0e9d2d4c3adbaafca6b86ef">sphgtod</a> (struct timeval *tv, struct timezone *tz)</td></tr>
<tr class="memdesc:a860edd3eb0e9d2d4c3adbaafca6b86ef"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the timebase converted to gettimeofday struct timeval.  <a href="#a860edd3eb0e9d2d4c3adbaafca6b86ef">More...</a><br /></td></tr>
<tr class="separator:a860edd3eb0e9d2d4c3adbaafca6b86ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a138f546350457ca0bb22f1ddc7ca43aa"><td class="memItemLeft" align="right" valign="top"><a class="el" href="sphtimer_8h.html#a4d08a6f74d96b695afefd03854839b83">__C__</a> <a class="el" href="sphtimer_8h.html#a2075c191959b463818a251bc7a9372dd">sphtimer_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sphgtod_8h.html#a138f546350457ca0bb22f1ddc7ca43aa">sphget_gtod_conv_factor</a> (void)</td></tr>
<tr class="memdesc:a138f546350457ca0bb22f1ddc7ca43aa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the timebase-to-gettimeofday conversion factor.  <a href="#a138f546350457ca0bb22f1ddc7ca43aa">More...</a><br /></td></tr>
<tr class="separator:a138f546350457ca0bb22f1ddc7ca43aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adec34d06fd903f95183eb1a5fc6f6d10"><td class="memItemLeft" align="right" valign="top"><a class="el" href="sphtimer_8h.html#a4d08a6f74d96b695afefd03854839b83">__C__</a> int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sphgtod_8h.html#adec34d06fd903f95183eb1a5fc6f6d10">sphtb2gtod_withfactor</a> (struct timeval *tv, <a class="el" href="sphtimer_8h.html#a2075c191959b463818a251bc7a9372dd">sphtimer_t</a> timestamp, <a class="el" href="sphtimer_8h.html#a2075c191959b463818a251bc7a9372dd">sphtimer_t</a> tb2gtod_factor)</td></tr>
<tr class="memdesc:adec34d06fd903f95183eb1a5fc6f6d10"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the timebase converted to gettimeofday struct timeval.  <a href="#adec34d06fd903f95183eb1a5fc6f6d10">More...</a><br /></td></tr>
<tr class="separator:adec34d06fd903f95183eb1a5fc6f6d10"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Functions to convert time stamp (sphtimer_t) values to struct timeval value format with gettimeofday() epoch. </p>
<p>This API is intended to support post processing time stamps (including those generated by SPHLFLogger_t and SPHSinglePCQueue_t) into gettimeofday() epoch and related formatted time values.</p>
<p>It is not intended as an exact replacement for gettimeofday() because it may not include any NTP corrections for example, but it will close and will be monotonic. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a138f546350457ca0bb22f1ddc7ca43aa"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="sphtimer_8h.html#a4d08a6f74d96b695afefd03854839b83">__C__</a> <a class="el" href="sphtimer_8h.html#a2075c191959b463818a251bc7a9372dd">sphtimer_t</a> sphget_gtod_conv_factor </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the timebase-to-gettimeofday conversion factor. </p>
<p>As the timebase (sphtimer_t) is a fast hardware timer or something similar to "uptime" we need to allow for logs that persist across reboot. By saving this conversion factor in the log we can use it during post processing of the log to get the corrected gettimeofday value for formatted time values.</p>
<p>This allow the logger to run as fast as possible by postponing the timebase to gettimeofday conversion until post processing.</p>
<dl class="section return"><dt>Returns</dt><dd>The timebase to gettimeofday conversion factor. </dd></dl>

</div>
</div>
<a class="anchor" id="a860edd3eb0e9d2d4c3adbaafca6b86ef"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="sphtimer_8h.html#a4d08a6f74d96b695afefd03854839b83">__C__</a> int sphgtod </td>
          <td>(</td>
          <td class="paramtype">struct timeval *&#160;</td>
          <td class="paramname"><em>tv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct timezone *&#160;</td>
          <td class="paramname"><em>tz</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the timebase converted to gettimeofday struct timeval. </p>
<p>Returns a fast emulation of the values returned by gettimeofday computed from a queried machine timebase register value.</p>
<p>The timezone is not currently honored in the conversion.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tv</td><td>address of the struct timeval buffer. </td></tr>
    <tr><td class="paramname">tz</td><td>address of the stuct timezone or NULL. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The timebase converted to gettimeofday in struct timeval. </dd></dl>

</div>
</div>
<a class="anchor" id="adec34d06fd903f95183eb1a5fc6f6d10"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="sphtimer_8h.html#a4d08a6f74d96b695afefd03854839b83">__C__</a> int sphtb2gtod_withfactor </td>
          <td>(</td>
          <td class="paramtype">struct timeval *&#160;</td>
          <td class="paramname"><em>tv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="sphtimer_8h.html#a2075c191959b463818a251bc7a9372dd">sphtimer_t</a>&#160;</td>
          <td class="paramname"><em>timestamp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="sphtimer_8h.html#a2075c191959b463818a251bc7a9372dd">sphtimer_t</a>&#160;</td>
          <td class="paramname"><em>tb2gtod_factor</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the timebase converted to gettimeofday struct timeval. </p>
<p>As the timebase (sphtimer_t) is a fast hardware timer or something similar to "uptime" we need to allow for logs that persist across reboot. By saving the conversion factor (via <a class="el" href="sphgtod_8h.html#a138f546350457ca0bb22f1ddc7ca43aa" title="Return the timebase-to-gettimeofday conversion factor. ">sphget_gtod_conv_factor()</a>) in the log we can use it (via this API) during post processing of the log to get the corrected gettimeofday value for formatted time values.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tv</td><td>address of the struct timeval buffer. </td></tr>
    <tr><td class="paramname">timestamp</td><td>value via <a class="el" href="sphtimer_8h.html#a5dfff572b4f782e024b902a00169adfc" title="Read and return the Timebase value. ">sphgettimer()</a>. </td></tr>
    <tr><td class="paramname">tb2gtod_factor</td><td>timebase to gettimeofday conversion factor. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The timebase converted to gettimeofday in struct timeval. </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Aug 11 2016 05:16:51 for Shared Persistent Heap Data Environment Manual by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.9.1
</small></address>
</body>
</html>
