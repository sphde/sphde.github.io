<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Shared Persistent Heap Data Environment Manual: src/sphgtod.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.6.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>src/sphgtod.h File Reference</h1>
<p>Functions to convert time stamp (sphtimer_t) values to struct timeval value format with gettimeofday() epoch.  
<a href="#_details">More...</a></p>
<code>#include &lt;sys/time.h&gt;</code><br/>
<code>#include &lt;<a class="el" href="sphtimer_8h_source.html">sphtimer.h</a>&gt;</code><br/>

<p><a href="sphgtod_8h_source.html">Go to the source code of this file.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">__C__ int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="sphgtod_8h.html#a860edd3eb0e9d2d4c3adbaafca6b86ef">sphgtod</a> (struct timeval *tv, struct timezone *tz)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return the timebase converted to gettimeofday struct timeval.  <a href="#a860edd3eb0e9d2d4c3adbaafca6b86ef"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">__C__ <a class="el" href="sphtimer_8h.html#a2075c191959b463818a251bc7a9372dd">sphtimer_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="sphgtod_8h.html#a138f546350457ca0bb22f1ddc7ca43aa">sphget_gtod_conv_factor</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return the timebase-to-gettimeofday conversion factor.  <a href="#a138f546350457ca0bb22f1ddc7ca43aa"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">__C__ int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="sphgtod_8h.html#adec34d06fd903f95183eb1a5fc6f6d10">sphtb2gtod_withfactor</a> (struct timeval *tv, <a class="el" href="sphtimer_8h.html#a2075c191959b463818a251bc7a9372dd">sphtimer_t</a> timestamp, <a class="el" href="sphtimer_8h.html#a2075c191959b463818a251bc7a9372dd">sphtimer_t</a> tb2gtod_factor)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return the timebase converted to gettimeofday struct timeval.  <a href="#adec34d06fd903f95183eb1a5fc6f6d10"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Functions to convert time stamp (sphtimer_t) values to struct timeval value format with gettimeofday() epoch. </p>
<p>This API is intended to support post processing time stamps (including those generated by SPHLFLogger_t and SPHSinglePCQueue_t) into gettimeofday() epoch and related formated time values.</p>
<p>It is not intended as an exact replacement for gettimeofday() because it may not include any NTP corrections for example, but it will close and will be monotonic. </p>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a138f546350457ca0bb22f1ddc7ca43aa"></a><!-- doxytag: member="sphgtod.h::sphget_gtod_conv_factor" ref="a138f546350457ca0bb22f1ddc7ca43aa" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__C__ <a class="el" href="sphtimer_8h.html#a2075c191959b463818a251bc7a9372dd">sphtimer_t</a> sphget_gtod_conv_factor </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Return the timebase-to-gettimeofday conversion factor. </p>
<p>As the timebase (sphtimer_t) is a fast hardware timer or something similar to "uptime" we need to allow for logs that persist across reboot. By saving this conversion factor in the log we can use it during post processing of the log to get the corrected gettimeofday value for formated time values.</p>
<p>This allow the logger to run as fast as possible by postponing the timebase to gettimeofday conversion until post processing.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>The timebase to gettimeofday conversion factor. </dd></dl>

</div>
</div>
<a class="anchor" id="a860edd3eb0e9d2d4c3adbaafca6b86ef"></a><!-- doxytag: member="sphgtod.h::sphgtod" ref="a860edd3eb0e9d2d4c3adbaafca6b86ef" args="(struct timeval *tv, struct timezone *tz)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__C__ int sphgtod </td>
          <td>(</td>
          <td class="paramtype">struct timeval *&nbsp;</td>
          <td class="paramname"> <em>tv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct timezone *&nbsp;</td>
          <td class="paramname"> <em>tz</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Return the timebase converted to gettimeofday struct timeval. </p>
<p>Returns a fast emulation of the values returned by gettimeofday computed from a queried machine timebase register value.</p>
<p>The timezone is not currently honored in the conversion.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>tv</em>&nbsp;</td><td>address of the struct timeval buffer. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>tz</em>&nbsp;</td><td>address of the stuct timezone or NULL. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>The timebase converted to gettimeofday in struct timeval. </dd></dl>

</div>
</div>
<a class="anchor" id="adec34d06fd903f95183eb1a5fc6f6d10"></a><!-- doxytag: member="sphgtod.h::sphtb2gtod_withfactor" ref="adec34d06fd903f95183eb1a5fc6f6d10" args="(struct timeval *tv, sphtimer_t timestamp, sphtimer_t tb2gtod_factor)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__C__ int sphtb2gtod_withfactor </td>
          <td>(</td>
          <td class="paramtype">struct timeval *&nbsp;</td>
          <td class="paramname"> <em>tv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="sphtimer_8h.html#a2075c191959b463818a251bc7a9372dd">sphtimer_t</a>&nbsp;</td>
          <td class="paramname"> <em>timestamp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="sphtimer_8h.html#a2075c191959b463818a251bc7a9372dd">sphtimer_t</a>&nbsp;</td>
          <td class="paramname"> <em>tb2gtod_factor</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Return the timebase converted to gettimeofday struct timeval. </p>
<p>As the timebase (sphtimer_t) is a fast hardware timer or something similar to "uptime" we need to allow for logs that persist across reboot. By saving the conversion factor (via <a class="el" href="sphgtod_8h.html#a138f546350457ca0bb22f1ddc7ca43aa" title="Return the timebase-to-gettimeofday conversion factor.">sphget_gtod_conv_factor()</a>) in the log we can use it (via this API) during post processing of the log to get the corrected gettimeofday value for formated time values.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>tv</em>&nbsp;</td><td>address of the struct timeval buffer. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>timestamp</em>&nbsp;</td><td>value via <a class="el" href="sphtimer_8h.html#a5dfff572b4f782e024b902a00169adfc" title="Read and return the Timebase value.">sphgettimer()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>tb2gtod_factor</em>&nbsp;</td><td>timebase to gettimeofday conversion factor. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>The timebase converted to gettimeofday in struct timeval. </dd></dl>

</div>
</div>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&nbsp;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr size="1"/><address style="text-align: right;"><small>Generated on 17 Jan 2014 for Shared Persistent Heap Data Environment Manual by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
